source = ~/.config/hypr/hyprvars.conf
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/workspaces.conf

$system_theme      = Arc-Dark
$cursor_theme      = WhiteSur-cursors # Adwaita
$cursor_size       = 24
$icon_theme        = Papirus
$dpi_scale         = 1
$text_scale        = 1
$scripts_path      = ~/.config/hypr/scripts

### Environment variables ###
env = CLUTTER_BACKEND,wayland
env = GDK_BACKEND,wayland,x11,*
env = GDK_DPI_SCALE,$dpi_scale
env = GDK_SCALE,$dpi_scale
env = QT_AUTO_SCREEN_SCALE_FACTOR,$dpi_scale
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_QPA_PLATFORMTHEME,kde
# env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
# env = GTK_USE_PORTAL,1
env = GTK_THEME,$system_theme # gtk theme
env = SDL_VIDEODRIVER,wayland
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = XDG_MENU_PREFIX,plasma-

exec = gsettings set org.gnome.desktop.interface gtk-theme $system_theme
exec = gsettings set org.gnome.desktop.interface icon-theme $icon_theme
exec = gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'

# nvidia enable
# env = LIBVA_DRIVER_NAME,nvidia
# env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct

### Cursors ###
env = HYPRCURSOR_SIZE,$cursor_size
env = HYPRCURSOR_THEME,$cursor_theme
env = XCURSOR_SIZE,$cursor_size
env = XCURSOR_THEME,$cursor_theme

# input method
# See https://fcitx-im.org/wiki/Using_Fcitx_5_on_Wayland
env = QT_IM_MODULE, fcitx
env = XMODIFIERS, @im=fcitx
env = SDL_IM_MODULE, fcitx
env = GLFW_IM_MODULE, ibus
env = INPUT_METHOD, fcitx

### Auto Start ###
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XAUTHORITY
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = gnome-keyring-daemon --start --components=secrets
exec-once = quickshell
exec-once = hypridle
exec-once = hyprpaper
exec-once = [workspace 1 silent] zen-browser
exec-once = ~/.config/hypr/scripts/zen_popup.sh
exec-once = sleep 3; safeeyes
exec-once = wl-clip-persist --clipboard regular
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = [workspace 2 silent] ghostty
exec-once = [workspace 3 silent] thunderbird
exec-once = hyprsunset
exec-once = journalctl-desktop-notification
exec      = fcitx5 &


### Window Rules ###
windowrule = match:class .*(confirm|org.freedesktop.impl.portal.desktop.kde|dialog|org\.pulseaudio\.pavucontrol|nm-connection-editor|blueman-manager|cpupower-gui|waypaper).*, tag +dialog
windowrule = match:title .*(Extension.*Bitwarden|.*File Upload.*).*, tag +dialog
windowrule = match:tag dialog, float on
windowrule = match:tag dialog, center on
windowrule = match:tag dialog, size 45% 45%
# Smart borders: hide borders when only one window is present
windowrule = border_size 0, match:float false, match:workspace w[tv1]
windowrule = border_size 0, match:float false, match:workspace f[1]
windowrule = match:class (dai\.quake), float on
windowrule = match:class (dai\.quake), center on
windowrule = match:class (dai\.quake), decorate false
windowrule = match:class (dai\.quake), dim_around on
windowrule = match:class (dai\.quake), no_anim on
windowrule = match:class (dai\.quake), size 1400 875
windowrule = match:class (firefox|zen|), idle_inhibit fullscreen
windowrule = match:title Rofi, animation popin

# Picture-in-Picture
windowrule = match:title [Pp]icture.?[Ii]n.?[Pp]icture, float on
windowrule = match:title [Pp]icture.?[Ii]n.?[Pp]icture, keep_aspect_ratio on
windowrule = match:title [Pp]icture.?[Ii]n.?[Pp]icture, move (monitor_w*0.73) (monitor_h*0.72)
windowrule = match:title [Pp]icture.?[Ii]n.?[Pp]icture, size (monitor_w*0.25) (monitor_h*0.25)
windowrule = match:title [Pp]icture.?[Ii]n.?[Pp]icture, pin on

# Layer rules
layerrule = match:namespace waybar, blur on
# layerrule = match:namespace quickshell:.*, blur on
layerrule = match:namespace bar-1, blur on

### Keybindings ###
$meh = CONTROL SHIFT ALT
bind = SUPER, return,      exec, ghostty
bind = SUPER, B,               exec, zen-browser
bind = SUPER, E,               exec, dolphin
bind = SUPER, D,               exec, discord
# bind = $meh, L,                exec, swaylock -f
bind = $meh, L,                exec, hyprlock
bind = $meh, N,                exec, makoctl dismiss -a
bind = SUPER, V,               exec, ~/.config/rofi/cliphist/run
bind = ,Print,                 exec, grimblast --notify --freeze copy area
bind = SHIFT,Print,            exec, grimblast --notify save area
bind = SUPER,Print,            exec, grimblast --notify copy screen
bind = SUPER SHIFT,Print,      exec, grimblast --notify save screen
# bind = SUPER ALT,Print,        exec, agsv1 -r 'recorder.start()'
bind = ,XF86PowerOff,          exec, hyprpanel t powerdropdownmenu
bind = SUPER, space,           exec, rofi -show drun
binde = ,XF86AudioLowerVolume, exec, wpctl set-volume -l 1.4 @DEFAULT_AUDIO_SINK@ 5%-
binde = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.4 @DEFAULT_AUDIO_SINK@ 5%+
bind = ,XF86AudioMute,         exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = ,XF86AudioMicMute,      exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle
bind = ,XF86MonBrightnessDown, exec, qs ipc call brightness decrement || brightnessctl s 5%+
bind = ,XF86MonBrightnessUp,   exec, qs ipc call brightness increment || brightnessctl s 5%-
bind = ,XF86Launch4,           exec, qs ipc call powerProfile cycle || asusctl profile --next
bind = SUPER, F1,              exec, qs ipc call gamingMode toggle  # $scripts_path/gamemode.sh
bind = SUPER, F,               fullscreen, 0
bind = SUPER, M,               fullscreen, 1
bind = SUPER, P,               pseudo, # dwindle
bind = SUPER, Q,               killactive,
bind = SUPER, R,               togglesplit, # dwindle
bind = SUPER, backslash,       exec, $scripts_path/quake > /dev/null
bind = SUPER, T,               togglefloating,
bind = SUPER, Tab,             workspace, previous
bind = SUPER SHIFT, P,         exec, hyprpicker -a

# handy audio controls(bindl for lockscreen)
bindl = SUPER ALT, P,               exec, playerctl play-pause
bindl = SUPER ALT, bracketright,    exec, playerctl next
bindl = SUPER ALT, bracketleft,     exec, playerctl previous

# ORC
bind = $meh,S,                 exec, grimblast save area tmp.png && tesseract -l eng tmp.png - | wl-copy && rm tmp.png

# Move focus with mainMod + arrow keys
bind = SUPER, H,     movefocus, l
bind = SUPER, J,     movefocus, d
bind = SUPER, K,     movefocus, u
bind = SUPER, L,     movefocus, r
bind = SUPER ALT, H, movewindow, l
bind = SUPER ALT, J, movewindow, d
bind = SUPER ALT, K, movewindow, u
bind = SUPER ALT, L, movewindow, r

# bind = ALT, Tab,       cyclenext
# bind = ALT, Tab,       bringactivetotop
# bind = ALT Shift, Tab, cyclenext, prev
# bind = ALT Shift, Tab, bringactivetotop


# Switch workspaces with mainMod + [0-9]
bind = SUPER, 1,     workspace, 1
bind = SUPER, 2,     workspace, 2
bind = SUPER, 3,     workspace, 3
bind = SUPER, 4,     workspace, 4
bind = SUPER, 5,     workspace, 5
bind = SUPER, 6,     workspace, 6
bind = SUPER, 7,     workspace, 7
bind = SUPER, 8,     workspace, 8
bind = SUPER, 9,     workspace, 9
bind = SUPER, 0,     workspace, 10
bind = SUPER, s,     togglespecialworkspace
bind = SUPER ALT, s, movetoworkspace, special


# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = SUPER ALT, 1, movetoworkspace, 1
bind = SUPER ALT, 2, movetoworkspace, 2
bind = SUPER ALT, 3, movetoworkspace, 3
bind = SUPER ALT, 4, movetoworkspace, 4
bind = SUPER ALT, 5, movetoworkspace, 5
bind = SUPER ALT, 6, movetoworkspace, 6
bind = SUPER ALT, 7, movetoworkspace, 7
bind = SUPER ALT, 8, movetoworkspace, 8
bind = SUPER ALT, 9, movetoworkspace, 9
bind = SUPER ALT, 0, movetoworkspace, 10

# Scroll through existing workspaces
bind = SUPER, bracketleft,     workspace, e-1
bind = SUPER, bracketright,    workspace, e+1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER ALT, mouse:272, resizewindow

bind = SUPER Shift, L, resizeactive, 30 0
bind = SUPER Shift, H, resizeactive, -30 0
bind = SUPER Shift, K, resizeactive, 0 -30
bind = SUPER Shift, J, resizeactive, 0 30

# Window split ratio
binde = Super, Minus, splitratio, -0.1      # Decrease split ratio by 10%
binde = Super, Equal, splitratio, +0.1      # Increase split ratio by 10%

# Zoom
binde = Super ALT, Minus, exec, qs ipc call zoom zoomOut # Zoom out
binde = Super ALT, Equal, exec, qs ipc call zoom zoomIn # Zoom in

# virtual machine submap
# bind = SUPER ALT, F1, submap, vm
bind = Super+Alt, F1, exec, notify-send 'Entered Virtual Machine submap' 'Keybinds disabled. Hit Super+Alt+F1 to escape' -a 'Hyprland' && hyprctl dispatch submap vm
submap = vm
# bind = SUPER ALT, F1, submap, reset
bind = Super+Alt, F1, exec, notify-send 'Exited Virtual Machine submap' 'Keybinds re-enabled' -a 'Hyprland' && hyprctl dispatch submap reset
submap = reset

gesture = 3, horizontal, workspace,
